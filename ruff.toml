# Ruff configuration for Python linting and formatting
line-length = 100
target-version = "py311"

[lint]
select = [
  "E",      # pycodestyle errors
  "W",      # pycodestyle warnings
  "F",      # pyflakes
  "I",      # isort
  "N",      # pep8-naming
  "UP",     # pyupgrade
  "ANN",    # flake8-annotations
  "ASYNC",  # flake8-async
  "S",      # flake8-bandit
  "BLE",    # flake8-blind-except
  "B",      # flake8-bugbear
  "A",      # flake8-builtins
  "C4",     # flake8-comprehensions
  "ERA",    # eradicate
  "PIE",    # flake8-pie
  "RET",    # flake8-return
  "SIM",    # flake8-simplify
  "PTH",    # flake8-use-pathlib
  "PL",     # pylint
  "RUF",    # ruff-specific rules
]

# Temporarily disabled to unblock CI - TODO: Fix incrementally
ignore = [
  "ANN204",  # Missing return type annotation for __init__ - TODO: Add None return type
  "ANN401",  # Any type annotation - TODO: Add specific types
  "S101",    # Use of assert detected - Acceptable in tests
  "A002",    # Shadowing builtins - TODO: Rename shadowing variables
  "BLE001",  # Blind exception catching - TODO: Use specific exceptions
  "B007",    # Unused loop variable - TODO: Use underscore prefix
  "B904",    # Raise from exceptions - TODO: Add proper exception chaining
  "PLR0912", # Too many branches - TODO: Refactor complex functions
  "PLR0913", # Too many arguments - TODO: Reduce function parameters
  "PLR0915", # Too many statements - TODO: Break up long functions
  "PLR0133", # Two constants compared - TODO: Use better test assertions
  "PLR2004", # Magic values - TODO: Replace with named constants
  "PLW2901", # Loop variable overwritten - TODO: Use different variable names
  "PLC0206", # Dict without .items() - TODO: Use .items() when iterating
  "E501",    # Line too long - TODO: Break long lines
  "ERA001",  # Commented-out code - Kept for documentation purposes in some areas
  "PLC0415", # Import at top-level - TODO: Move imports to module level
  "PIE810",  # Call startswith once - TODO: Use tuple for multiple checks
  "F402",    # Import shadowed by loop variable - TODO: Rename loop variable
  "F823",    # Variable referenced before assignment - Can produce false positives with conditionals
  "F841",    # Unused variable - TODO: Remove or use variables
  "C401",    # Unnecessary generator - TODO: Use comprehensions
  "RET504",  # Unnecessary variable assignment - TODO: Return directly
  "SIM108",  # Use ternary operator - TODO: Simplify if-else to ternary
]

[lint.per-file-ignores]
# Test files can use assertions and magic values
"tests/**/*.py" = ["S101", "PLR2004"]

# __init__.py files can have unused imports (re-exports)
"__init__.py" = ["F401"]

# Cover letter generator uses random.choice() for non-security text variations
# This is acceptable as it's for stylistic variety, not cryptographic purposes
"src/python/cover_letter_generator/generator.py" = ["S311"]

# Database client uses dynamic SQL construction with proper validation:
# - ORDER BY columns validated against whitelist (ALLOWED_ORDER_COLUMNS)
# - UPDATE column names come from validated Pydantic model fields
# - All user values use parameterized queries with ? placeholders
"src/python/db/client.py" = ["S608"]

[lint.isort]
known-first-party = ["resume_toolkit"]

[format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"
